#include <iostream>
#include "../../src/e3extensions/secureint.h"

using namespace std;

#define MAX_NUM 50
//#define NUM 5

string libgDir = "./libg.so";
string gFunctionName = "libg";

int main()
{
	Cryptosystem cs("45244723986571154391523459508346812728517882315815670359813201275079814709217","16","58432986977970943921465516538841843301795847017536846196414187924720068409309229301008728022403113842764790967149071801933197501104790892130448705767821","1029918084310197093130070367473818266862471983887696650441655192566932426577527167465781646533681513118488665504774066268034426165036382729925627152682505","1577671633674633157003996152937118640053331167895262803087143389100725880362095780602603801875842587026461027804417968179347410226188206606626156509955832", libgDir, gFunctionName);

	SecureInt num("1421381819133210497410750643209626635355358414743896107903114542707832257477014733631296338704267373379541518425758721883238766686443943296787732030809214",cs);
	SecureInt fact("375387524209910076936591912488465130074282083407293280711242207903168229096060038492756231206771029260944684872103638594796891894985250164035361829767962",cs);
	SecureInt i("1339456613861745931787632042907610878128234058626270060428811281814183607675505219496697818171481475613322487641085046377557870311264194315770415082580975",cs);
	SecureInt result("1983351699244886073953004066691393976914173999076804086117725433548730914418125547597962212593725808320294345290608233205712609435088541563762354129925221",cs);
	
	int counter = 1;

	do {
		cout << counter << "...\n";
		fact *= i;
		result += (i == num) * fact;
	} while (++counter != MAX_NUM);


	cout << "fact(" << fact.str() << ") = " << result.str() << "\n";

	return 0;
}

