#include <iostream>
#include "../../src/e3extensions/secureint.h"

using namespace std;

#define MAX_NUM 50
//#define NUM 5

string libgDir = "./libg.so";
string gFunctionName = "libg";

int main()
{
	Cryptosystem cs("61650917138405643126013538965976095245014633114402917428528701762173129938781","16","2880894846902451960412140785534581011302300924470524770631575652906793058704956071835348872240745406654962775043020441210003347919135067565537748111000096","15084408645754853421978121267707720295677819367965335487669060531563053402996782055606956106704923935648383819909549813156027593426604108885572708719679","2944794127314708225118058685007775763799783291249161201325331312230661501025116617997207039206670255930573967959777881367768373052435699186165585751005632", libgDir, gFunctionName);

	SecureInt num("283750779141933189842564184960621148485480799583095766863253288518161291813256657924046807675725230834339924478656199810329242713121453380998482099071987",cs);
	SecureInt fact("3541542000676018427460718110687993029634612011076639246951557945901719299960493819471317361632505757656301492287318832471602802169726446547788323815088699",cs);
	SecureInt i("2961912295059691095078296945422954002231734178621380727719383257545838038207052866339605463358406346908715424802421238026418598092191785477886478821751149",cs);
	SecureInt result("2366887391340171822724996989433614499205676910871912093480921772357574897414024409159973966773336247247824575312808421882731620839724379825561558685633135",cs);
	
	int counter = 1;

	do {
		cout << counter << "...\n";
		fact *= i;
		result += (i == num) * fact;
	} while (++counter != MAX_NUM);


	cout << "fact(" << fact.str() << ") = " << result.str() << "\n";

	return 0;
}

