#include <iostream>
#include "../../src/e3extensions/secureint.h"

using namespace std;

#define MAX_NUM 50
//#define NUM 5

string libgDir = "./libg.so";
string gFunctionName = "libg";

int main()
{
	Cryptosystem cs("68413992039196895358873249833768829098105287619304641426015704522609736638649","16","2693490072083612642739613381161185351706679971127201069897982659701207966893546588024866873552945925813000069959721652499975200250939346071379929762542056","2890161929075159008144899284082865850367374835156014829815606643929293511947014390007514543519854536651239250376480244995027867865745803359628100728236896","4481829413548348627564703107019951813063866004630677859538048488302905872214478185454008692269972072892606172168401625054647736969605895370778269441637940", libgDir, gFunctionName);

	SecureInt num("4495047986264348230026334461048908170032942885827816184839666799046322706709065010683432429533073028271736153037057883601215141472352685638010855235988685",cs);
	SecureInt fact("921536047125267018438843104195417470523548920148705720728363647950370600999815089132144144287495764893737236626511487817001507057420792807586780214664657",cs);
	SecureInt i("4584145534266847230477715706744476304540007247965727391237237337897335472600598676297983843111516958186013221272069256432763531018152037260501836361955051",cs);
	SecureInt result("1998727468317804714680112841142096435286583394291441378595129998899695243716876848611713194475178206017460665337370465799555968923439829615306090247854137",cs);
	
	int counter = 1;

	do {
		cout << counter << "...\n";
		fact *= i;
		result += (i == num) * fact;
	} while (++counter != MAX_NUM);


	cout << "fact(" << fact.str() << ") = " << result.str() << "\n";

	return 0;
}

