#include <iostream>
#include "../../src/e3extensions/secureint.h"

using namespace std;

#define MAX_NUM 50
//#define NUM 5

string libgDir = "./libg.so";
string gFunctionName = "libg";

int main()
{
	Cryptosystem cs("34180544886649560687843639423953165842976112780204143743906096694310623979269","16","35510547283561512124113552754622478471856552460318451532885241120692888032206876544032308483593679121962924133784659675097568873335226262504480070148136","475075939465819606608278967333778501973271005963622001623337136733661239844549990766459923651646922044806974368827547611017749863642063154889536662931400","857717313797160476768498001085070878356060103011605287543005622481972086939741547430096661485532970976838499021686844838054263894479545530783472379162391", libgDir, gFunctionName);

	SecureInt num("852449129716728914981416029270527067336639489893290599802702842568757983637135831205812752913566578231586295193450646269860449456491448275297815099341015",cs);
	SecureInt fact("1049576499566163625291041570732857711295022561412227117737721137090027418809781004484688679356298318041926313243086602014754706981187789080455393774081977",cs);
	SecureInt i("797747433484494375855276546023617239182844379320429620989878462300465155541077398818715671283623736494269561799755013010461161604145682179547226306990465",cs);
	SecureInt result("1017561190142361443383107549409295986524374745499503161037675342955357091866464220976718962745157722344227167785079780548288400262056724015380984005556378",cs);
	
	int counter = 1;

	do {
		cout << counter << "...\n";
		fact *= i;
		result += (i == num) * fact;
	} while (++counter != MAX_NUM);


	cout << "fact(" << fact.str() << ") = " << result.str() << "\n";

	return 0;
}

