#include <iostream>
#include "../../src/e3extensions/secureint.h"

using namespace std;

string libgDir = "./libg.so";
string gFunctionName = "libg";

#define MAX_NUM 50
//#define NUM 12

int main()
{
	Cryptosystem cs("8979436926278075416264362693274593600558383801911147217040910456073395578332716827207028778903373643524747479467948750253231066163390183404624036498902517","8","16642286917462701690473518567336212296769806761969182622106737236401428631460639735727147425769567461276377250600513287843934955098269585520319183111113727073728855678691283618465648807247876460553610864696446358139540835783027399127824144813985522502861291858799537290166863751701203119157835129031753387859","30590292303621816797787788472916490683800468720262469011739782742924583743124051415491779679824416543490003445225736865785442162986110773056647245337105358002885997010881177202651478162567839133327304677155926325148118124800412907938745564606066939370260002278800069487953504663415160718730553777506035972207","60317550038688875471779981610543413117057266241254979459069402903723107936919923480018417575430109960876497980507287680355171898474819907639363693480857544964329220244782784649142105279163362744148231315230916761753934585885283841730015318003227501394852381318147622026744320498599915046595875012368845075054", libgDir, gFunctionName);

	SecureInt num("441137928482081962693736150744464632392098174458278771060012325394848942432789900754568392790530029840881029765433194263761003325215654766158962627233019786966119304028358933227678557071349581020627641106050450445830092651753865389610610088544695106905443828190365283384028084690749842269372423662795645115",cs);
	SecureInt f1("42883968002583291644774487347153828804384960150721259056392532805447889152643703148591835372407289228806118695962251016691211114437848155463288030267708443966278524508514718851170658052541168945681971207307224436382242289228104940692805384350620716722279908076836293865047593552694012413127637760394980923087",cs);
	SecureInt f2("26740551895519411423164882759963917291159013113369420400008100899800613283154688308667746806455626810620070457262130073242932656631241354083260174994635338184994567835210886767592659438402270106849217791703130036634588701518834341002696143938767314618518963001480811566913363195685541649558597359971998857113",cs);
	SecureInt fi("70679173299047061052427924397710534869021774462908301173875119361421093279254552844834276386631840986409071123384190396100296464344782148752641182772714614344483231429183704386208972625485996573097584657592490638627157079485072606231043724650335438841927737799618780537328973183951456422510658982438454954114",cs);
	SecureInt i("11581998298341520910884165687692760816619930154235070180671938528313307796266300058964717729513974991198772574749436715072499641153895313599558443573010476221719106696562377575459539863645357569810178727056323199708132107929693793821789501477242308609451302456863452449028097192631907107832363357262458743463",cs);
	SecureInt result("49954439415158353436613494631806389621379289692664227752805699641821736631235045564022125477358106165262587441556984359038063167206709468516827903636696588500989571570100440750981288809907022492104638635565309958857631246274899692462587264486680921669241025608593690785057345519313128639868495049648856878664",cs);

	int counter = 1;
	do {
		result += (i == num) * fi;
		fi = f1 + f2;
		f1 = f2;
		f2 = fi;
		++i;
	} while (++counter != MAX_NUM);	
	cout << "fib( " << num.str() << " ) = " << result.str() << "\n";

	return 0;
}

