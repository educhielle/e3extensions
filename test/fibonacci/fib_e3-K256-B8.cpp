#include <iostream>
#include "../../src/e3extensions/secureint.h"

using namespace std;

string libgDir = "./libg.so";
string gFunctionName = "libg";

#define MAX_NUM 10
//#define NUM 7

int main()
{
	Cryptosystem cs("53993415962217885481657052119294964805709141308786499540528142910026108361473",8,"2470923715646661749237269679071189259954962935136343856497186600321463882220782519080331341531740682056088810571844609160958061016249288966556274460822484",{"2082075662033902523095552222445245521672477599643436231654218309106580147191054071128542621438247425215153774756716200378080273793642787096378499707408069","2575068006660901004356017985932969887796735282769576520220198036014562936675158483372022061731489413448007550511970157629280516426059192612852570511864904","408683291171298389669717322621133556651202644259055933442025787618896716418169641315714395417407418390322384787957901094668293913131104513383271000729390","1990109959934838510775437128921231860488724731562269218608466945579412788586666093952009183658096471063962228294612010575785609021440778321164688763806318","628972770474866004992749573064811117467381844789011045228179768389140344816532303109504942403386452901069075610748589652578600664513123287230669018694610","594105401158108203677608915764100103203370878315945429496171228847484286689499951112179073299585635284041395135322946419115986837647273303420076261919571","577728889140430475524729030550316814068945565503573079343434328393153950502267200057570617033965535540415284190936972675551769739479337548392921090579253","678484318614144353347327663422178895912750147534621909007358539266409611198405565695047646514911983669280395535751620613999255467716917046089335891117050","127106616127500545391019006259575163736515910905981114515942837867487739132945037347148542263664347410580856437019891444226166005833409075619721590083498"},"254309849357770892549058107208751509125775607172846361306838851117237944067342788034092886073960843780407715146676498465424151396963472401281255554971803","2395778266389194841847466889147080976801289299730049909291250863180099502628823980981696353175453424157956202569693025440937570974307116659214765329358664", libgDir, gFunctionName);

	SecureInt num("205256998045835217654511368770865701137404401966696305557635305183436160384738854314883018211923232033082514402123553800172253301668575910056281938461638",cs);
	SecureInt f1("2890256005479824972654580141185736751532426445591992879920220802983600306090994150705251432832118372671644900402605160561346378165749634241538577046519921",cs);
	SecureInt f2("1289278107784931726954343059200090264350105798158772782816609288226659712662112520251483510151546282556108806479853086649165005384919508070628551489398012",cs);
	SecureInt fi("1413974940897401383634542269342596760394089688064183566452862628218290072665845259358054384180861499145661877917217661984360826363570217965126273431523013",cs);
	SecureInt i("2058001703529724209022967103511916334838581610682846286159709779367223742279024327201247462417223517037579034199732457401850974066098399225724852299851087",cs);
	SecureInt result("484764485215884017680831243003584541458498817324189164155759743810714059501039342737553029030124817215278923394894275936894412977040549618959696914546247",cs);

	int counter = 1;
	do {
		result += (i == num) * fi;
		fi = f1 + f2;
		f1 = f2;
		f2 = fi;
		++i;
	} while (++counter != MAX_NUM);	
	cout << "fib( " << num.str() << " ) = " << result.str() << "\n";

	return 0;
}

