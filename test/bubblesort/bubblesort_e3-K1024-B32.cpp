#include <iostream>
#include "../../src/e3extensions/secureint.h"

#define LEN 6

using namespace std;

string libgDir = "./libg.so";
string gFunctionName = "libg";

void bubbleSort(SecureInt[], int);
void printArray(SecureInt[], int);
void swap(SecureInt*, SecureInt*);
 
// Driver program to test above functions
int main()
{
	Cryptosystem cs("141707184455821158664471012661653322224848748678962203182311620155826676075771640131731217286643011125315641367253288305078087640771854292677617974343677922053167992486661575028684824357693278002355977151168073333102604765655964961627456632332767360162868492539360368685572635719830103079976763116878586204833",32,{"14428106104024148972948830053491189164826542679606025819458193520403285960084230596112947568294969237086483905091524417254722779173633266316187669069494219822841766173797443294902116288754231896350484739198378844500584761328579908043864173387322843348930299484389352308269973794869385181041852979837482674261799792746850987656787315953861046307181086624751902028638697183300748434820229766655942535920231048362499276980745222878608997112397595237240302029335664370334592675670158631022460608595249676329619773605544666421798120248034335770455848167867102301751707413649600772831421040884602163143464798380349021553445","19159514411812773672781594644983541495849857118169228318077194943024390373609252526488425669242991589196266719934087245686735148042618044003809839618783537365683426406374590787252024108084692735944228376768913099285397935674606983399345106252016003022996925329950506920067601021648429467103678011637286423299958509144292233125812516979511931211973194500133599179933724336535712457008267808140083389382644631102108859104148933979073318074650732533412830014561001385008936651887689229323344115760005595858336573862901974522866037995958968955599858157910675100272207915215320358496758832782971964307374571596594721600415","11385378991146041982641796730693339725431456536039022023396366368266048669460957878392908240443932397940656148103205571932387719382864892620063953218672351305320682301491404893680552524715621404453314856931381324262890592171406574322996551476782242750840513953885552046719758422909853942537471487963659789757596675902193918553475923245333151576586177490503760323336502955077640110762501901748314904950673859692007847639515797803560249324746155553790931171508176613724493105494380000715993770298271106403861959123956021432532677195031673431524001298381630264402769089502603298802007658954872359577836715659380319697860","1237816878718154284062074302633502006144286987139456201864376298905885249560642179964416798949229045800175747701086200651674334934676479346697860498745639682854951523796631780213449043120084570473324748792369989282986739538135474406984644084561463379679452987540896372809847572727422077619694639001683100637593845047218484205049729933741657567449336734924180746684353769774193374606430547549981699460601864261412905721787818976789906786609562737126944024670576388343713107041749865324180203430570277100171967634555765984197431722236347739445781293534292938342176794585066286861217532828211132110852798341977593154470","8343495771702491331491121147007452986925523984575631857038262015326316906423253151823118587577655175627602118816002645381317293997780854800598057646452280329436461829880213368038075838084233698716759330274742137351734667779590020918458586356703297040426935756019285798079518157626808014281580718934356316272643612319399903674678700296390711553558770936567526033902001399729709986513136450341552585015983066720902703347864043385289179684842378538906788970990820291131178319461440128910108918989727415682915206673702484619326730703965884584870090235843999500282620890636588330920946517210941165142505577803171108282430","4018032800205502885357786957868930056208537318897798358161461867255609906549121013711878745869669245104566296148463347512920498954563839845942475235526777415506986984552424490377536742020104277541516889507477536084574579262107654199607652791849111739917463967066474020907473777802979641420580537518074423176802361831363221789031792380181289260248883544495202688781372196595710224564462488093922019086981497254101922048086194119540124397418304873597565957190067917517628134237574455566735746264693130269669954390071669277494708624955011977476490377517474240762844672920470534413647265059644948112057089013567207812970","3952548617298607063746998688388087060605254335233876720783308719369007255870787193597482270551059235292118232401604005750694105949147581571818430572668991830272409478056176838523670761999394870554279006929964107593848227728153479811999171467972469859697181535140836644434879296586672670344888086771710317179646807843661081670431320636215176822057838492599406676868379477686596644245436625586673228274129216501944361177070574919758179989110744134659138389650410660455433481223690601280236181217547422450915293164238988189612604401003676995364891618094289868230600088148471816910667671968884959741084572288746182148643","6409609923476420007600403667996782176871282543029629324611625881872164327185132572308766710863661456569834501733834584698194639134479406658494622907137734256782231876276975852545318405003219309606830994519398044916417823518442846113965849277165661316903551377692365486106064326722389046825182341113936573706573362741919957117678768748159707607597079130924989997065197791891415148263237004047628837719149351193463896427998175771173125086682960373419269898438586957232892451792269298488644775088202934378148720690923606105243574897840286013970341791265481179146499610191219952896448532883129684225795499781271059976513","1369561398967412053649934497647552234695880115235486655514975250434883438809945337325317058159095650588159292990420639552689978141660628474158420060460883192092751181380026235672557310382164531559901757114411580043152359489488225899751992818653667537291428302515920177322357136652114788568195168932787105882671206446220380605945855113322311428542153421350435775492667970990793678397046070552724630396043683669745245217578031192107217775435757439156760400367284617892076867589696952827933657585113294099367283687753069969779414439595291253370726639438711666390861672930188610441832356495974106414795333288640369289947","18859137567193659918229060088260964707842851334663082374210577659768154246592893463558647705991329206089962229959438069224640999986184661580332456486920431870162235301930403426992936314472019981836375472994637873026244866387212516115045331506372789866473016704313781894789851428524733203834585673053292497058399597600994569301076116523067090995433785714388710476598845583998306390342966131165351514480785109963057915441547690205006224112182396617506155324735323415059244626676472682443499874495698052963126509753729003953225832906975464408029194691595232703788517597369175806167999271228933939264528798519354418597776","79521817365422079755430918988373615161555988398715075764601158613063971211301060118745044288984177391910059492008816943621486995049669600632942515558054741466452403444374479641371643664224785298471354559037728590139386876767626965659324616825106665058530490359781243783995704215356690689400270711482252946117709463860599332204874022609843560428969278506929310700525825062458848172633173025439425174175507676808383839303313437396038993654272713750115168391159901387570964053892366851760082075721463874786590667254132586468035867710217617001906667205428542398802067344720715753663251679532401705903241262296832994811","6553973700828686646474269692088056911689403173089845310358998695110673138165703857708250502315878957631628770240591920991644399222144358286233698627783364121488748855845193932912696320079273477646983943669324263987715421270652843581514453486753051958758515111563996317135339921124218835958394391864037036777004621637654231924283242907515376942692074022513780084853091814497179394229941657382836504892936869444504007578125460467637242455722676809550373418447515446691744291572224988695044000991567432170358032573489443697053623369035785658303541435503473336742640245193156916017733551446345502586391845784317045119986","6384481440929211407088876966438695252849795639319502107504736348718546206334778658710486928440795957562215668111900914875632006369035573723298898385255742509186555089643278305189702956128454851578437436092848070171726055847424188519060880261373155787436105919858009710847679653322152220177288876730841162661521755518987991794231776691917672744209010328857803273468823263911319276024470022582926181608253071655678077639847580467037753697706334015890085798143150300988664972757071028209574725051140165777726342933770968331087025911503496921116368468924141155232044103071138843673300813359124082143192823397025979564815","16363127913962692147401312855455009198665940609159204173679180842822377442926889566865113179478845910817124516696794134841632981368650187992275700084166326235749301666145118112335320553530974069237408478413241031822693709791707810277629265516372314428346448215311785973617740584081160104881762859083216722932431213298205659909746277850839179786797993443372005184878247877384140314568925500635849040853487415318960943320622786906224654052218732537563990796466386042151317859665269585252307987452400543661008774424156314090427374760721460072715076305719378735217695179216598599241716494259223562531810197244004657477695","7009539348095920293456371273642964296510452534600074513400999320967822105501205674338030556170145063523150263493155207974204925384086957229448383788594194135750096106289445686374142220642806780261842343042596102588966835214510347247799364660535065824465594400628940260419731966547611167314720821802495689930432611680088295916656584236237294352209228735500499563764576552504429079858320744793840115761710453211053716211259386313170375679871202977557511340018549005301677008846429148931958242637318683121715127620750081887424022138881237516545181578952990465877263173654405187231754407323365207900061756385449013354384","7872906718239602895707835494776545450939416118396229202911107344569430717265331059840247274556478926847223499124256256756842886715510609791651042451934825710856182702175465836482772925154083011423896248435040551589979687635927538008722800626373804714178565241862949612649721145467290038403725722558677467978838618694109994521932312601692190188668860652352672698359326844246608561014763102571282267569177909527950242146235678181062473634930410221019658952162687905389540262581600902871239132945759399002498800593898156191420680128727564771524874117911619194811760181249996783567799195136838563802827705067629138453446","2526164620875493579945361871776437439961929786620618293315136604940023803025918013146438406321357168796085495083262144191689548994974021633565391618110359580956122162972550701477235585552807047360231943270115648817540849282094939320891900490365473597852048843931843684371690104952478288651735384352887944448418365082029505080982694070240660566895690979388877290560116374354420080710186567396226417402094803413947409245557959444285622222266368804688382489129904289982523101591298090809714875880852754762985846544812492281564417923181781077362353538421763482819929252679016656627152647532276012711970480157906999446554","2244709644505863725016909210882610483910953598666481740405644266939449670604711266713879854228201564991595994314734560054087276057938316032566143472120076597483481239762167892756109741753459181842785140021102942294359904203314765778178740276760321285544171970504539107152647125841292020869222028878975701748790788215905229316888452334825397734404072899535823778247661655265503823946207884278327089494017827275698094953974292836107958843587427877734616836949891052060286519510262976853676820647619392265196480354523876648575167930968392411557167120989281811595038930277513047382325731523468754153391214892788417871896","11699300520806420617003000664078250993393765680169708640062075927355815579659542073928946357262360337929829718027335265695674098282165209491522668506687131152738625463490842085268858720646902474078689268968711557448505745053043032157206056197411898308538540005734550506682351525444529687999512640863289968558614098660189849478686390840656837890541674924677395353285943634612492689841998546634188045043473254303902362376206535218379228023575772214303081586503269294444528513584853378013173883687413863074214167631218247469600522925761793903526642444979487645297690770246732376222244831109102978313939839607486890535680","9182467907413243406587587460716783287206410397960245190068021648639377747463064569517201427083509036663542478066610951093576925981166620071427186650083699425135602348647375328197542972664141634545887058574752739402473799046652814773508281842580802182244237960126193600567266254864590695250937204834633444907522322646296370122121833779180513553452928144245472497161415990636741164875896232034459429252985829139717189060982791427767934757409857318362638312963268661828304928431207606275004866431998307211547930712209691505893638586156800712187418385515768969695375331059435448234737946527236953406100037010105205656309","10398174777190855617018883816593805245075025285538684161082478404525648294869786904153158847238380605756237420970615579581470858534714181440754302593057612958201109305791974847271259567450324542854031623156761486264861679068998101687566796027575993248424155499022382524363189344685227171495595118016510358726583427707353273855410051638816519202744191067718223729386783613506612676077188623401855413382717994088263482866296193349500382994333760628051773757141301615211998954182158964119870058661732957351006899383866733093252235710550556542051531525007818228912005554886670562594131280211815770333932523771707060197087","18337424651980913655892086527951044914662632351037907979474764092095060862753330597595779880854372143218344869728141770652411607273767150973302441955778505855353237979413209199659046806075802871234582093472896795929070524654931283289299489491955546554706712684791845679287557786014027957502286722701480474308155931151423170275084374462332871567683729174325716328939832577720280708430050235732137040804048350223036036725692322133459222417443176470264811264076515857274327387698499481477042909368829102088898337846163659036655661966971087901315047835518836172897104610003504118333431230223616407448031203694401560524856","12730185459255095969377529629997085748097968309288731883843360376035441562281354625049657873660549166059520373635501776522490546974053719387234558836761461857767942172633900949203964831571934799738479844179481683918260888705738179431971483236633998443513488489235610138192853918655312998025692362942104831317949590056700381259506659093824210010704688819322953046357902951099081727221586923979881253494183631235456375146856960811532273978950394440582897994239696272306464460251380211511331719671185389827827750317258223815088262781637214869012574437054816199131851242367429188797892665777939332736650479248873955278167","5577491032542760676650533937632217940470578883989587780812549166141113700599560748826531408300476168147674241336751375934495826769092070040730333275807736181784522402678765731531949051316549507925787465963003179728327710709202239725907099493998957694378391135056465847690212673143009753006653772081772549070161046495438413197749594049512324795146893445721941627538548581077317543328494791211955981103546754582993670913113925828930278333036706887330204887398081126165339990944786581297037448019810592173644056260797437338893103517088668052263615299647049106163659881951704349987512691334359497916229754856971795860021","3868138670146990520599270310220027045695577837102948657301714081172870848211140796625710724190206055356567676387638820367127842092561901612952537315181063571838479257972658123240117420035991704567568814164499431026961628665260906196094380573436218152274217198939762815234538849585151166221662117782348133478909087690538724790013706777196651012868033134249123913404916206953663603911606061148594329064873239247175009943810419749748704730866247860602056980102719780631109068050692581760001179913442244345621605366645197515464781721119782709240862488081219796348652647985943225325901637099425965142079577501056803477259","20070246427983279373329394213451286438301293024927320711205097016481155126694059303808339260899628428542757212606428166773960995913943855358344430013453674422194211129876740485037804422626530184844260796905507755034259421305059536432145995117389556838185791831367780891226763273238820148377822130077990851229810873770714001537788894370103984010436006846488396433656440350635203742103382367385901674249028731761170356931276837098250420318055052704217270680739907003422505907229588972193750777571043312547944617661412727463757466068829656621358343341221184036542554746426376106542858748679262542401565444340633744601813","6156119397153311273583920186283518745987569238830738547916463001171274157690089587748400732934453728796902446424505073375762045323904574077864732588465975164423067853581766237635112893387695307991107463413346724902134093363371353168612649243475225588427218900819677626968678205131558833705125994383023933378641968841252914692341474898066768401128690914191991876807979295553190623718672330233077124342751592345255700518455651771096007394461029543500601647439360408561422241376624248123992226415875744897591902483680859975048381764726863509189707944561944776313882233511810847258028846930781912311652411224722476577898","11289216809186381261820868399240254478030115901454625848738689402199446822048765526478548657920046713895401751410051229321428025820096703767748255739314415239580977588010902402150891425977037780003724551167509263342165832262121516179288750299824570282802321511746482188554672959368831079220949093722833006378219079769441123729888939112663368202795917272901434754333911374387994048978467743021019587761688248256424461368694689706406680684473329749428732681854964034693449118473747741652094052916720467856237502322741736781314045550223134047835333195569960030571033795867782249444962021908341241196640893498379616351698","5264542226855527220494846024590289501831521468586049307565860351071617803867970482534661346699520395371439937169987936190145542760379603365142198767860997315126328660017670167247084856188335883007394928677902269656637842787839740065407366716548630104073081360347031114708030249288397212713593118040275767240774108933171679139306306970422734765099043047740427831656701875028012439996700778334753697558869009257411547879183059335982378565587971652707240155615434835964134537025698386659857386365335898652700388737153043015870376850391034086322868064884132926440981447598391666916027633804134028047987377611358100668999","4996838170418136649836617253992408374393735839979525367123984196225961746872939432580770869814725801461661697278607742320366722453838831445397275338167991977634557941784767415989102316676126103271040679630369447645500993625671727150300497802152292450002303068116646661672372673471509944425632217103660325610173054902390686434580938512225273376516123956627591915134026688277850116518226286169008104593685841817892556331433593153887301088036070332837696010953160562123604553692691262199922823522741694699639320414738008600031797195679854861252620908881549541318691052909382756055348874224133650654137170600590060999306","14405581352764419523535902074666154375440641351544463129955602132156540743264308169773677144946852349412358075238035860310298515656837629368935856782988875911265368951676396991968467482352165209835493823219651380084361075073790314056027990898718676709745679915148550748330847170513542826338088310262566844922728351393228158487815930178204488216248512753337122636195978932707958849783954480845845315989152242668341226605001170364748218966753398408517451843019436022231591813491205422910001459478092818564112046957460390940424746570422573284539845185270099032402525354378543293030325712900004101259284636771184847147448","18480316222271183963159644014928241851714499183041531831908810923415280139343788478404906016850950503706128071503663583447756861180417751865780200151095766181755464373986678472016292800707425901602042878053034784032262613426970144103295387179599280355574604476297204750646676228286584031247990242929511310340574897525602123954554189982347637978942607077020378350020281488931555174944311575728584095205696185798478815772169021449209411064908278112082915738049481952713707660337183483610527408371626775095308888000128012759512558376305811689426360909138016846245581537233164385326289126675810849407123024556121742305082","6641203465207289553432475537566587025110108380809062688699021692333629061710648845309105343830277804240839538624088502741349906991110053153363931358020303114106174282640630848303522203225139501870223218119908911101186664143317114359136050630276796798011359770843839910191671130408269810218573947384354003571788114486072186324487469533009753246242567907840490213920794211515785008279697524275295232815916730927582448028815041439553004242081319717358802141420843083986821409595903884535212350442511723528421243155153224830542432401190895247719908683406480736521765779856336920368708425746005543033657272981136939717982"}, libgDir, gFunctionName);
	SecureInt a[LEN];

	a[0] = SecureInt("13270457282874264439143103159815498179493480398913097785007511572358799710223072934275662672914457536215829664093891346163681801058850358666044821688128389953104344737572861226976198874092149220413805714099334213935225302368530383437515010045947723093917306378613403937912825663836405980541502468778880607519521059300890674225207116418198319491010955473614809374259673683425188443600319263975372531260964920094265681437760356771125839189849524913651664334830326013616793300148515542787425369891383866638953562069467125190660385092395048069726252997466441655217237508336875651668533166576887742761517997860202144882751",cs);
	a[1] = SecureInt("12526857054275854275989467349397883396355877783934061579153343041366386027977014029043031553782253531303916541979928596162504293214448544156777261933325407897462067988544456442474887058844968449068609403477259807461501287574833329761419770233228411042836791433599664886511065970251198423573051335531300276939639714610760207383854436260838473400157100181387936499050683509827304700992736771237152938595482985424554320482758052825794498862788820714108684996310577719064221458915103466105288627484418435029333126208392134447863841778550848356058772265625163319040193962190047250599966393591217470533330014438480527149775",cs);
	a[2] = SecureInt("13538373213058971656650908851537004930736867550807201012094748325887633981272093452664608575130264794834704500750602495533464096033634558498853548575592045239184299671740875133888262618780197252448136592369510208187386777303458708269624390781129556491961093496254227405443165468887166915825004926808258964006715942652880495920905507147083145492892956026590275428053084293045687087296270295062192267226248049093267201767056874330422618533002202680592690125090636356088776990122751591897733577784593322268294665079378933107695995461285107205040046140988709654869183395252053288050526072796116298701727758723279459407818",cs);
	a[3] = SecureInt("3640343767178249657756725146374047810294751201328233942720295471372734658870928771012119717996736201106905433623822669377728359344610198146975679622228402737290764249386808568313642299968744720774681948660340078132591760674810750937102761214864547784775450232490952392850578755594068728539249557359217907240779436348677660709421266130629773136516144426168043009956798206940889344132160292557931843794041332479399191859124606911367147324655713581385546658479286473916237788788142225955574761909782097042579527924998491694117558430203995391296356371310746452933498029791440773428413277518588619657214057302677717122962",cs);
	a[4] = SecureInt("10426838309622976784595878590584480657551504029285045208897604719127193040021781396777759769830697844540075853745340869777496561890706832595271609619497878064029965286660040374899718149426121411374356488816348828975127927118042714255896078062884540841202088874398508689894621682782985709744218275941513866923674907226195666393970032548218073120018558399864379849312552343331096242956252901360893417698202728494862607474170199795870489580312921035029496365246854280813553714746579113960913281183699589121133003975342809255602419699524729798334702658462043789311693132097043625786704882072184903808489236516969034931100",cs);
	a[5] = SecureInt("4899729459275261045782966522595347456894339695326771868857405199859970365314895018286623565913362273647630682346494615269814148773066557073101281902652229449075745901445509815841999494827393420347399835671647832091525977803935660762584269279057132136680289887611331540348807283978718739344129992414836167475318796082277808099425256690661289623740816395199802416913024580403515342926134338170913577834744190531119989867162830374691556458710143325162562660129456731978571072374026962372865412194703263391114131249537941127902956179423326559583365934459537187037487150741862129964863542089382069046204160235840701880183",cs);

	bubbleSort(a, LEN);

	cout << "Sorted array is:  ";
	printArray(a, LEN);

	return 0;
}

// A function to implement bubble sort
void bubbleSort(SecureInt arr[], int n)
{
	int i, j;
	SecureInt cond1, cond2, smaller, greater;

	for (i = 0; i < n-1; i++)
	{
		// Last i elements are already in place   
		for (j = 0; j < n-i-1; j++)
		{
			cond1 = arr[j] <= arr[j+1];
			cond2 = arr[j+1] < arr[j];
			smaller = cond1 * arr[j] + cond2 * arr[j+1];
			greater = arr[j+1] + arr[j] - smaller;
			arr[j] = smaller;
			arr[j+1] = greater;
		}
	}
}


/* Function to print an array */
void printArray(SecureInt arr[], int size)
{
	for (int i=0; i < size; i++) cout << arr[i].str() << " ";
	cout << "\n";
}


void swap(SecureInt *xp, SecureInt *yp)
{
	SecureInt temp = *xp;
	*xp = *yp;
	*yp = temp;
}

